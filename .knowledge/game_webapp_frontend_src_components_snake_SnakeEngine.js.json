{"is_source_file": true, "format": "JavaScript", "description": "This file defines a JavaScript class 'SnakeEngine' which implements the core game logic for the Snake game. It handles grid setup, snake movement, food spawning, collision detection, and game state management, designed to be integrated into a React frontend as a modular game engine without rendering responsibilities.", "external_files": [], "external_methods": [], "published": ["SnakeEngine"], "classes": [{"name": "SnakeEngine", "description": "A modular, pure JavaScript class implementing the logic for the Snake game, managing game state, movement, collisions, and food spawning."}], "methods": [{"name": "constructor({ cols = 20, rows = 20, speedMs = 160, onChange = () => {} } = {})", "description": "Initializes a new SnakeEngine instance with optional configuration parameters for grid size, speed, and a change callback.", "scope": "SnakeEngine", "scopeKind": "class"}, {"name": "reset()", "description": "Resets the game to its initial state, positioning the snake at the center and spawning food.", "scope": "SnakeEngine", "scopeKind": "class"}, {"name": "start()", "description": "Starts the game timer, causing the game to begin ticking.", "scope": "SnakeEngine", "scopeKind": "class"}, {"name": "stop()", "description": "Stops the game timer, effectively pausing the game.", "scope": "SnakeEngine", "scopeKind": "class"}, {"name": "isRunning()", "description": "Returns a boolean indicating whether the game timer is active.", "scope": "SnakeEngine", "scopeKind": "class"}, {"name": "getState()", "description": "Returns an immutable snapshot of the current game state, including snake position, food location, score, and status.", "scope": "SnakeEngine", "scopeKind": "class"}, {"name": "setDirection(dir)", "description": "Requests a change in direction for the snake ('up', 'down', 'left', 'right'), preventing direct reversal.", "scope": "SnakeEngine", "scopeKind": "class"}, {"name": "_tick()", "description": "Performs one game tick: moves the snake, checks collisions, handles food consumption, and updates state.", "scope": "SnakeEngine", "scopeKind": "class"}, {"name": "_emit()", "description": "Invokes the onChange callback with the current game state.", "scope": "SnakeEngine", "scopeKind": "class"}, {"name": "_setSpeed(ms)", "description": "Adjusts the tick interval speed and restarts the timer if the game is active.", "scope": "SnakeEngine", "scopeKind": "class"}, {"name": "_spawnFood()", "description": "Generates a new food position on a free cell not occupied by the snake.", "scope": "SnakeEngine", "scopeKind": "class"}, {"name": "_gameOver()", "description": "Handles game over scenario by stopping the game and updating the status.", "scope": "SnakeEngine", "scopeKind": "class"}], "calls": ["setInterval", "clearInterval", "this._emit", "this._spawnFood", "this._gameOver", "this._setSpeed"], "search-terms": ["SnakeEngine", "game logic", "snake movement", "food spawning", "collision detection"], "state": 2, "file_id": 20, "knowledge_revision": 48, "git_revision": "", "ctags": [{"_type": "tag", "name": "SnakeEngine", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^export class SnakeEngine {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "_emit", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^  _emit() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "SnakeEngine", "scopeKind": "class"}, {"_type": "tag", "name": "_gameOver", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^  _gameOver() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "SnakeEngine", "scopeKind": "class"}, {"_type": "tag", "name": "_setSpeed", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^  _setSpeed(ms) {$/", "language": "JavaScript", "kind": "method", "signature": "(ms)", "scope": "SnakeEngine", "scopeKind": "class"}, {"_type": "tag", "name": "_spawnFood", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^  _spawnFood() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "SnakeEngine", "scopeKind": "class"}, {"_type": "tag", "name": "_tick", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^  _tick() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "SnakeEngine", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^  constructor({ cols = 20, rows = 20, speedMs = 160, onChange = () => {} } = {}) {$/", "language": "JavaScript", "kind": "method", "signature": "({ cols = 20, rows = 20, speedMs = 160, onChange = () => {} } = {})", "scope": "SnakeEngine", "scopeKind": "class"}, {"_type": "tag", "name": "direction", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^    this.direction = { x: 1, y: 0 };$/", "language": "JavaScript", "kind": "class", "scope": "SnakeEngine.reset", "scopeKind": "class"}, {"_type": "tag", "name": "down", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^      down: { x: 0, y: 1 },$/", "language": "JavaScript", "kind": "class", "scope": "SnakeEngine.setDirection.map", "scopeKind": "class"}, {"_type": "tag", "name": "getState", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^  getState() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "SnakeEngine", "scopeKind": "class"}, {"_type": "tag", "name": "isRunning", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^  isRunning() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "SnakeEngine", "scopeKind": "class"}, {"_type": "tag", "name": "left", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^      left: { x: -1, y: 0 },$/", "language": "JavaScript", "kind": "class", "scope": "SnakeEngine.setDirection.map", "scopeKind": "class"}, {"_type": "tag", "name": "map", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^    const map = {$/", "language": "JavaScript", "kind": "class", "scope": "SnakeEngine.setDirection", "scopeKind": "class"}, {"_type": "tag", "name": "newHead", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^    const newHead = { x: head.x + this.direction.x, y: head.y + this.direction.y };$/", "language": "JavaScript", "kind": "class", "scope": "SnakeEngine._tick", "scopeKind": "class"}, {"_type": "tag", "name": "nextDirection", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^    this.nextDirection = { x: 1, y: 0 }; \\/\\/ buffered direction from input, applied per tick$/", "language": "JavaScript", "kind": "class", "scope": "SnakeEngine.reset", "scopeKind": "class"}, {"_type": "tag", "name": "reset", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^  reset() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "SnakeEngine", "scopeKind": "class"}, {"_type": "tag", "name": "right", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^      right: { x: 1, y: 0 },$/", "language": "JavaScript", "kind": "class", "scope": "SnakeEngine.setDirection.map", "scopeKind": "class"}, {"_type": "tag", "name": "setDirection", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^  setDirection(dir) {$/", "language": "JavaScript", "kind": "method", "signature": "(dir)", "scope": "SnakeEngine", "scopeKind": "class"}, {"_type": "tag", "name": "start", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^  start() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "SnakeEngine", "scopeKind": "class"}, {"_type": "tag", "name": "stop", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^  stop() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "SnakeEngine", "scopeKind": "class"}, {"_type": "tag", "name": "up", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^      up: { x: 0, y: -1 },$/", "language": "JavaScript", "kind": "class", "scope": "SnakeEngine.setDirection.map", "scopeKind": "class"}, {"_type": "tag", "name": "x", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^      down: { x: 0, y: 1 },$/", "language": "JavaScript", "kind": "property", "scope": "SnakeEngine.setDirection.map.down", "scopeKind": "class"}, {"_type": "tag", "name": "x", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^      left: { x: -1, y: 0 },$/", "language": "JavaScript", "kind": "property", "scope": "SnakeEngine.setDirection.map.left", "scopeKind": "class"}, {"_type": "tag", "name": "x", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^      right: { x: 1, y: 0 },$/", "language": "JavaScript", "kind": "property", "scope": "SnakeEngine.setDirection.map.right", "scopeKind": "class"}, {"_type": "tag", "name": "x", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^      up: { x: 0, y: -1 },$/", "language": "JavaScript", "kind": "property", "scope": "SnakeEngine.setDirection.map.up", "scopeKind": "class"}, {"_type": "tag", "name": "x", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^    const newHead = { x: head.x + this.direction.x, y: head.y + this.direction.y };$/", "language": "JavaScript", "kind": "property", "scope": "SnakeEngine._tick.newHead", "scopeKind": "class"}, {"_type": "tag", "name": "x", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^    this.direction = { x: 1, y: 0 };$/", "language": "JavaScript", "kind": "property", "scope": "SnakeEngine.reset.direction", "scopeKind": "class"}, {"_type": "tag", "name": "x", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^    this.nextDirection = { x: 1, y: 0 }; \\/\\/ buffered direction from input, applied per tick$/", "language": "JavaScript", "kind": "property", "scope": "SnakeEngine.reset.nextDirection", "scopeKind": "class"}, {"_type": "tag", "name": "y", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^      down: { x: 0, y: 1 },$/", "language": "JavaScript", "kind": "property", "scope": "SnakeEngine.setDirection.map.down", "scopeKind": "class"}, {"_type": "tag", "name": "y", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^      left: { x: -1, y: 0 },$/", "language": "JavaScript", "kind": "property", "scope": "SnakeEngine.setDirection.map.left", "scopeKind": "class"}, {"_type": "tag", "name": "y", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^      right: { x: 1, y: 0 },$/", "language": "JavaScript", "kind": "property", "scope": "SnakeEngine.setDirection.map.right", "scopeKind": "class"}, {"_type": "tag", "name": "y", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^      up: { x: 0, y: -1 },$/", "language": "JavaScript", "kind": "property", "scope": "SnakeEngine.setDirection.map.up", "scopeKind": "class"}, {"_type": "tag", "name": "y", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^    const newHead = { x: head.x + this.direction.x, y: head.y + this.direction.y };$/", "language": "JavaScript", "kind": "property", "scope": "SnakeEngine._tick.newHead", "scopeKind": "class"}, {"_type": "tag", "name": "y", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^    this.direction = { x: 1, y: 0 };$/", "language": "JavaScript", "kind": "property", "scope": "SnakeEngine.reset.direction", "scopeKind": "class"}, {"_type": "tag", "name": "y", "path": "/home/kavia/workspace/code-generation/browser-playful-game-7897-7906/game_webapp_frontend/src/components/snake/SnakeEngine.js", "pattern": "/^    this.nextDirection = { x: 1, y: 0 }; \\/\\/ buffered direction from input, applied per tick$/", "language": "JavaScript", "kind": "property", "scope": "SnakeEngine.reset.nextDirection", "scopeKind": "class"}], "hash": "9f2498df55420440d92c6101454f7d50", "format-version": 4, "code-base-name": "game_webapp_frontend", "filename": "game_webapp_frontend/src/components/snake/SnakeEngine.js", "fields": [{"name": "down: { x: 0, y: 1 },", "scope": "SnakeEngine.setDirection.map.down", "scopeKind": "class", "description": "unavailable"}, {"name": "left: { x: -1, y: 0 },", "scope": "SnakeEngine.setDirection.map.left", "scopeKind": "class", "description": "unavailable"}, {"name": "right: { x: 1, y: 0 },", "scope": "SnakeEngine.setDirection.map.right", "scopeKind": "class", "description": "unavailable"}, {"name": "up: { x: 0, y: -1 },", "scope": "SnakeEngine.setDirection.map.up", "scopeKind": "class", "description": "unavailable"}, {"name": "const newHead = { x: head.x + this.direction.x, y: head.y + this.direction.y };", "scope": "SnakeEngine._tick.newHead", "scopeKind": "class", "description": "unavailable"}, {"name": "this.direction = { x: 1, y: 0 };", "scope": "SnakeEngine.reset.direction", "scopeKind": "class", "description": "unavailable"}, {"name": "this.nextDirection = { x: 1, y: 0 }; \\/\\/ buffered direction from input, applied per tick", "scope": "SnakeEngine.reset.nextDirection", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"48": ""}]}